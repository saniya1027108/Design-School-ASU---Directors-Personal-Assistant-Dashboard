<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Personal Assistant{% endblock %}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&display=swap" rel="stylesheet">
  <style>
    :root {
      --page-max: 1600px;
      --base: 18px;
      /* Main theme: #6a9aad (soft blue-teal) with yellow & pink accents */
      --nav-bg: linear-gradient(135deg, #5a8a9d 0%, #6a9aad 100%);
      --nav-bg-solid: #6a9aad;
      --nav-text: #f0f6f8;
      --nav-active: rgba(255,255,255,0.25);
      --nav-hover: rgba(255,255,255,0.12);
      --body-bg: #fefce8;
      --card-bg: #ffffff;
      --card-border: #e7e9e0;
      --text-primary: #1c1917;
      --text-muted: #6b7280;
      --border-neutral: #e7e9e0;
      --accent: #6a9aad;
      --accent-hover: #5a8a9d;
      --accent-light: #eef4f7;
      --accent-soft: #b8d4de;
      --surface-soft: #fefce8;
      /* Dashboard color tokens */
      --color-calendar-bg: #fefce8;
      --color-calendar-accent: #ca8a04;
      --color-blue-bg: #eef4f7;
      --color-blue-accent: #6a9aad;
      --color-todo-bg: #fdf2f8;
      --color-todo-accent: #db2777;
      --color-done-bg: #f0fdf4;
      --color-done-accent: #22c55e;
      --shadow-sm: 0 1px 3px rgba(106, 154, 173, 0.08);
      --shadow-md: 0 4px 12px rgba(106, 154, 173, 0.1);
    }
    * { box-sizing: border-box; }
    html, body { font-size: var(--base); background: var(--body-bg); color: var(--text-primary); font-family: 'DM Sans', -apple-system, sans-serif; margin: 0; min-height: 100vh; }
    .app-wrap { display: flex; flex-direction: column; min-height: 100vh; }
    .top-bar {
      background: var(--nav-bg-solid);
      background: var(--nav-bg);
      color: var(--nav-text);
      padding: 0.85rem 1.75rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      flex-wrap: wrap;
      gap: 0.75rem;
      border-bottom: 1px solid rgba(0,0,0,0.08);
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
    }
    .top-bar .greeting { font-size: 1.35rem; font-weight: 600; }
    .top-bar .date { font-size: 1.1rem; opacity: 0.9; color: #c5e0e8; }
    .nav-links { display: flex; gap: 0.35rem; flex-wrap: wrap; }
    .nav-links a {
      color: var(--nav-text);
      text-decoration: none;
      padding: 0.5rem 0.9rem;
      border-radius: 6px;
      font-weight: 500;
      font-size: 1.05rem;
      transition: background 0.2s, color 0.2s;
    }
    .nav-links a:hover { background: var(--nav-hover); color: #fff; }
    .nav-links a.active { background: var(--nav-active); color: #fff; }
    .nav-links a.text-warning:hover { color: #fcd34d !important; }
    .main-content { flex: 1; padding: 1.75rem 2rem; max-width: var(--page-max); width: 100%; margin: 0 auto; background: linear-gradient(180deg, #fffbeb 0%, var(--body-bg) 15%); }
    .main-content.agendas-full-width { max-width: none; padding-left: 2rem; padding-right: 2rem; }
    .card {
      border: 1px solid var(--card-border);
      border-radius: 12px;
      box-shadow: var(--shadow-sm);
      font-size: 1rem;
      background: var(--card-bg);
    }
    .card-title { font-size: 1.15rem; color: var(--text-primary); }
    .card-body { font-size: 1rem; color: var(--text-primary); }
    .form-control, .form-select {
      font-size: 1rem;
      border-color: var(--border-neutral);
      background: #fff;
    }
    .form-control:focus, .form-select:focus { border-color: var(--accent); box-shadow: 0 0 0 3px rgba(106, 154, 173, 0.2); }
    .btn { font-size: 1rem; }
    .btn-primary { background: var(--accent); border-color: var(--accent); color: #fff; }
    .btn-primary:hover { background: var(--accent-hover); border-color: var(--accent-hover); color: #fff; }
    .btn-outline-primary { border-color: var(--accent); color: var(--accent); }
    .btn-outline-primary:hover { background: var(--accent-light); border-color: var(--accent-hover); color: var(--accent-hover); }
    .btn-outline-secondary { border-color: var(--border-neutral); color: var(--text-muted); }
    .btn-outline-secondary:hover { background: var(--accent-light); border-color: var(--text-muted); color: var(--text-primary); }
    h1, h2, h3, h4, h5, h6 { color: var(--text-primary); }
    h1 { font-size: 1.85rem; }
    h2 { font-size: 1.6rem; }
    h3 { font-size: 1.4rem; }
    h4, h5 { font-size: 1.25rem; }
    h6 { font-size: 1.1rem; }
    .text-muted { color: var(--text-muted) !important; }
    .main-content.full-width { max-width: none; padding-left: 2rem; padding-right: 2rem; }
    .badge.bg-primary { background: var(--accent) !important; }
    .badge.bg-secondary { background: #a78bfa !important; color: #fff; }
    .border-primary { border-color: var(--accent) !important; }
    .text-primary { color: var(--accent) !important; }
    .bg-light { background: var(--accent-light) !important; }
    {% block extra_css %}{% endblock %}
  </style>
</head>
<body>
<div class="app-wrap">
  <header class="top-bar">
    <div>
      <span class="greeting">Hi {{ user_name or 'Guest' }}!</span>
      <span class="date ms-2" id="header-date">{{ current_date }}</span>
    </div>
    <nav class="nav-links">
      <a href="{{ url_for('dashboard') }}" class="{% if request.endpoint == 'dashboard' %}active{% endif %}">Dashboard</a>
      <a href="{{ url_for('emails_full') }}" class="{% if request.endpoint == 'emails_full' %}active{% endif %}">Emails</a>
      <a href="{{ url_for('agendas_list') }}" class="{% if request.endpoint == 'agendas_list' or request.endpoint == 'agenda_detail' or request.endpoint == 'agenda_drive_action_items' %}active{% endif %}">Agendas</a>
      <a href="{{ url_for('kanban_board') }}" class="{% if request.endpoint == 'kanban_board' %}active{% endif %}">Kanban</a>
      <a href="{{ url_for('settings_page') }}" class="{% if request.endpoint == 'settings_page' %}active{% endif %}">Settings</a>
      {% if session.get('logged_in') %}<a href="{{ url_for('logout') }}" class="text-warning">Logout</a>{% endif %}
    </nav>
  </header>
  <main class="main-content {% block main_content_class %}{% endblock %}" id="main-content">
    {% block content %}{% endblock %}
  </main>
</div>
<script>
  (function(){
    var d = new Date();
    var el = document.getElementById('header-date');
    if (el) el.textContent = d.toLocaleDateString('en-GB', { day: '2-digit', month: '2-digit', year: '2-digit' });
  })();
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
